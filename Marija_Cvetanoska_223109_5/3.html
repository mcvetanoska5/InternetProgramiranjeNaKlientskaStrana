<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Zadaca3</title>
    <script>
        var pozadina = "images/slika8.png";
        var images = [
            "images/slika2.png",
            "images/slika2.png",
            "images/slika3.png",
            "images/slika4.png",
            "images/slika5.png",
            "images/slika6.png",
            "images/slika7.png",
            "images/slika9.png",
            "images/slika1.png",
            "images/slika2.png",
            "images/slika3.png",
            "images/slika4.png",
            "images/slika5.png",
            "images/slika6.png",
            "images/slika7.png",
            "images/slika9.png",
        ]
        window.onload = () => { reset(); }
        var sliki = [];
        var brojac = 0;
        function openImage(e) {
            e.target.src = e.target.getAttribute("mainImage");
            if (sliki.includes(e.target)) {
                return;
            }
            if (brojac === 8) {
                return;
            }
            sliki.push(e.target);
            if (sliki.length === 2 && sliki[0].getAttribute("mainImage") === sliki[1].getAttribute("mainImage")) {
                e.target.src = e.target.getAttribute("mainImage");
                sliki = [];
                brojac++;
                if (brojac === 8) {
                    document.getElementById("congrats-text").style.display = "block";
                }
                return;
            }
            if (sliki.length === 3 && sliki[0].getAttribute("mainImage") !== sliki[1].getAttribute("mainImage")) {
                sliki[0].src = pozadina;
                sliki[1].src = pozadina;
                sliki = [];
                sliki.push(e.target);
            }
        }
        function shuffleArray(niza) {
            for (var i = niza.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [niza[i], niza[j]] = [niza[j], niza[i]];
            }
            return niza;
        }
        function reset() {
            var siteSliki = document.getElementsByTagName("img");
            images = shuffleArray(images);
            for (var i = 0; i < siteSliki.length; i++) {
                siteSliki[i].src = pozadina;
                siteSliki[i].setAttribute("mainImage", images[i]);
                siteSliki[i].addEventListener("click", openImage);
            }
            sliki = [];
            brojac = 0;
            document.getElementById("congrats-text").style.display = "none";
        }
    </script>
</head>

<body>
    <h1>Meморија</h1>
    <div style="text-align:left; float:left">
        <table border="1">
            <tr>
                <td id="11"><img src="" /></td>
                <td id="12"><img src="" /></td>
                <td id="13"><img src="" /></td>
                <td id="14"><img src="" /></td>
            </tr>
            <tr>
                <td id="21"><img src="" /></td>
                <td id="22"><img src="" /></td>
                <td id="23"><img src="" /></td>
                <td id="24"><img src="" /></td>
            </tr>
            <tr>
                <td id="31"><img src="" /></td>
                <td id="32"><img src="" /></td>
                <td id="33"><img src="" /></td>
                <td id="34"><img src="" /></td>
            </tr>
            <tr>
                <td id="41"><img src="" /></td>
                <td id="42"><img src="" /></td>
                <td id="43"><img src="" /></td>
                <td id="44"><img src="" /></td>
            </tr>
        </table>
        <input type="submit" value="RESET" onclick="reset()" />
    </div>
    <br />
</body>

</html>